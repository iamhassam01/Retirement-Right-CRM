version: '3.8'

services:
  crm:
    build: .
    container_name: retirement-crm
    restart: unless-stopped
    ports:
      - "3001:3001"
    environment:
      - DATABASE_URL=postgresql://postgres:RetirementCRM2026!@host.docker.internal:5432/retirement_crm?schema=public
      - JWT_SECRET=super_secret_jwt_key_change_in_production
      - NODE_ENV=production
      - PORT=3001
      - WP_SITE_URL=${WP_SITE_URL:-https://retirement-right.com}
      - WP_USERNAME=${WP_USERNAME}
      - WP_APP_PASSWORD=${WP_APP_PASSWORD}
    extra_hosts:
      - "host.docker.internal:host-gateway"
    volumes:
      - ./uploads:/app/uploads
